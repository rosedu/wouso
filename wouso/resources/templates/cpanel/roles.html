{% extends 'cpanel/index.html' %}
{% load user %}
{% load i18n %}

{% block sectiontitle %}
    Roles
    <a class="btn btn-primary pull-right" href="{% url roles_create %}">
        {% trans 'New role ' %}<span class="glyphicon glyphicon-plus"></span>
    </a>
{% endblock %}

{% block sectioncontent %}
<div class="container-fluid">
<table class="table table-bordered table-hover table-condensed">
    <tr>
        <th>Role</th>
        <th>Permissions</th>
        <th>Members</th>
        <th>Manage</th>
    </tr>
    {% for r in roles %}
    <tr>
        <td>{{ r }}</td>
        <td>
            {{ r.permissions.all|join:"," }}
        </td>
        <td>{{ r.user_set.all.count }}</td>
        <td>
            <a href="{% url roles_update r.id %}" class="btn btn-success">
                {% trans 'Edit ' %}<span class="glyphicon glyphicon-edit"></span>
            </a>
        </td>
    </tr>
    {% endfor %}
</table>
</div>
{% endblock %}
